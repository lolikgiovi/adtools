{"version":3,"file":"main-F_5wUmGq.js","sources":["../../src/features/image/image.template.js","../../src/features/image/image.service.js","../../src/features/image/image.ui.js","../../src/features/image/main.js"],"sourcesContent":["export const imageTemplate = `\n    <div class=\"tool-container\">\n      <h3 id=\"sectionText\">Image to Base64</h3>\n      <input type=\"file\" class=\"fileInput\" id=\"imageInput\" accept=\"image/*\" multiple>\n      <div id=\"imagePreview\" class=\"image-preview\"></div>\n      <div class=\"button-group\">\n        <button id=\"clearInputButton\" style=\"display:none;\">Clear</button>\n        <button id=\"downloadAllBase64Button\" style=\"display:none;\">Download All Base64</button>\n      </div>\n    </div>\n\n    <div class=\"tool-container\">\n      <h3 id=\"sectionText\">Base64 to Image</h3>\n      <textarea id=\"base64Input\" placeholder=\"Paste base64 string here\"></textarea>\n      <div class=\"button-group\">\n        <input type=\"file\" class=\"fileInput\" id=\"base64FileInput\" accept=\".txt\" multiple>\n        <button id=\"pasteButton\">Paste</button>\n        <button id=\"convertToImage\">Convert to Image</button>\n        <button id=\"clearResultButton\" style=\"display:none;\">Clear</button>\n        <button id=\"downloadAllImagesButton\" style=\"display:none;\">Download All Images</button>\n      </div>\n      <div id=\"convertedImagePreview\" class=\"image-preview\"></div>\n    </div>\n`;","export class ImageService {\n  async imageToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        const dataUrl = reader.result;\n        const mimeType = blob.type || \"image/png\";\n        if (!dataUrl.startsWith(`data:${mimeType};base64,`)) {\n          const base64Data = dataUrl.split(\",\")[1];\n          resolve(`data:${mimeType};base64,${base64Data}`);\n        } else {\n          resolve(dataUrl);\n        }\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n\n  async readFileAsText(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = (e) => resolve(e.target.result);\n      reader.onerror = reject;\n      reader.readAsText(file);\n    });\n  }\n\n  async convertBase64ToImage(base64String, fileName) {\n    if (base64String.startsWith(\"data:image\")) {\n      const blob = await fetch(base64String).then((res) => res.blob());\n      return new File([blob], fileName, { type: blob.type });\n    } else {\n      throw new Error(\"Invalid base64 string\");\n    }\n  }\n\n  async createZipFromImages(images) {\n    const zip = new JSZip();\n    for (let i = 0; i < images.length; i++) {\n      const response = await fetch(images[i].src);\n      const blob = await response.blob();\n      zip.file(`image_${i + 1}.png`, blob);\n    }\n    return zip.generateAsync({ type: \"blob\" });\n  }\n\n  async createZipFromBase64(images) {\n    const zip = new JSZip();\n    for (let i = 0; i < images.length; i++) {\n      const response = await fetch(images[i].src);\n      const blob = await response.blob();\n      const base64WithPrefix = await this.imageToBase64(blob);\n      zip.file(`image_${i + 1}.txt`, base64WithPrefix);\n    }\n    return zip.generateAsync({ type: \"blob\" });\n  }\n}","import { pasteFromClipboard } from \"../../utils/buttons.js\";\nimport { createImagePreview } from \"../../utils/imagePreview.js\";\nimport { imageTemplate } from \"./image.template.js\";\nimport { ImageService } from \"./image.service.js\";\n\nexport class ImageUI {\n  constructor(container) {\n    this.container = container;\n    this.imageService = new ImageService();\n    this.selectedFiles = [];\n    this.init();\n  }\n\n  async init() {\n    await this.initializeUi();\n    this.bindElements();\n    this.setupEventListeners();\n  }\n\n  async initializeUi() {\n    return new Promise((resolve) => {\n      this.container.innerHTML = imageTemplate;\n      requestAnimationFrame(() => {\n        resolve();\n      });\n    });\n  }\n\n  bindElements() {\n    this.elements = {\n      imageInput: document.getElementById(\"imageInput\"),\n      imagePreview: document.getElementById(\"imagePreview\"),\n      clearResultButton: document.getElementById(\"clearResultButton\"),\n      clearInputButton: document.getElementById(\"clearInputButton\"),\n      downloadAllBase64Button: document.getElementById(\"downloadAllBase64Button\"),\n      base64Input: document.getElementById(\"base64Input\"),\n      base64FileInput: document.getElementById(\"base64FileInput\"),\n      convertedImagePreview: document.getElementById(\"convertedImagePreview\"),\n      downloadAllImagesButton: document.getElementById(\"downloadAllImagesButton\"),\n      pasteButton: document.getElementById(\"pasteButton\"),\n      convertToImageButton: document.getElementById(\"convertToImage\"),\n    };\n  }\n\n  setupEventListeners() {\n    this.elements.imageInput.addEventListener(\"change\", (e) => this.handleImageSelection(e));\n    this.elements.clearInputButton.addEventListener(\"click\", () => this.clearInput());\n    this.elements.base64FileInput.addEventListener(\"change\", (e) => this.handleBase64FileSelection(e));\n    this.elements.convertToImageButton.addEventListener(\"click\", () => this.convertToImage());\n    this.elements.clearResultButton.addEventListener(\"click\", () => this.clearResult());\n    this.elements.pasteButton.addEventListener(\"click\", () => pasteFromClipboard(this.elements.base64Input));\n    this.elements.downloadAllBase64Button.addEventListener(\"click\", () => this.downloadAllBase64());\n    this.elements.downloadAllImagesButton.addEventListener(\"click\", () => this.downloadAllImages());\n  }\n\n  async handleImageSelection(event) {\n    this.selectedFiles = Array.from(event.target.files);\n    await this.updateImagePreview();\n    this.showHideDownloadAllButtons();\n  }\n\n  async updateImagePreview() {\n    const { imagePreview, clearInputButton } = this.elements;\n    imagePreview.innerHTML = \"\";\n    imagePreview.style.display = \"none\";\n    for (const file of this.selectedFiles) {\n      const previewElement = await createImagePreview(file);\n      imagePreview.appendChild(previewElement);\n      imagePreview.style.display = \"flex\";\n    }\n    clearInputButton.style.display = imagePreview.childElementCount > 0 ? \"inline-block\" : \"none\";\n  }\n\n  async handleBase64FileSelection(event) {\n    const base64Files = Array.from(event.target.files);\n    this.elements.convertedImagePreview.innerHTML = \"\";\n    for (const file of base64Files) {\n      const base64Content = await this.imageService.readFileAsText(file);\n      await this.displayConvertedImage(base64Content, file.name);\n    }\n  }\n\n  async convertToImage() {\n    const base64String = this.elements.base64Input.value.trim();\n    if (base64String) {\n      const base64WithPrefix = base64String.startsWith(\"data:image\") ? base64String : `data:image/png;base64,${base64String}`;\n      await this.displayConvertedImage(base64WithPrefix, \"Pasted Image\");\n    }\n  }\n\n  clearResult() {\n    const { base64FileInput, base64Input, convertedImagePreview, clearResultButton } = this.elements;\n    base64FileInput.value = \"\";\n    base64Input.value = \"\";\n    convertedImagePreview.innerHTML = \"\";\n    convertedImagePreview.style.display = \"none\";\n    clearResultButton.style.display = \"none\";\n  }\n\n  async displayConvertedImage(base64String, fileName) {\n    const { convertedImagePreview, clearResultButton } = this.elements;\n    try {\n      const file = await this.imageService.convertBase64ToImage(base64String, fileName);\n      const previewElement = await createImagePreview(file, true);\n      convertedImagePreview.appendChild(previewElement);\n      clearResultButton.style.display = convertedImagePreview.childElementCount > 0 ? \"inline-block\" : \"none\";\n      convertedImagePreview.style.display = \"flex\";\n      this.showHideDownloadAllButtons();\n    } catch (error) {\n      console.error(\"Invalid base64 string for\", fileName);\n    }\n  }\n\n  clearInput() {\n    const { imageInput, imagePreview, clearInputButton, downloadAllBase64Button } = this.elements;\n    imageInput.value = \"\";\n    imagePreview.innerHTML = \"\";\n    clearInputButton.style.display = \"none\";\n    imagePreview.style.display = \"none\";\n    downloadAllBase64Button.style.display = \"none\";\n  }\n\n  showHideDownloadAllButtons() {\n    const { downloadAllBase64Button, downloadAllImagesButton, imagePreview, convertedImagePreview } = this.elements;\n    downloadAllBase64Button.style.display = imagePreview.childElementCount > 1 ? \"inline-block\" : \"none\";\n    downloadAllImagesButton.style.display = convertedImagePreview.childElementCount > 1 ? \"inline-block\" : \"none\";\n  }\n\n  async downloadAllBase64() {\n    const images = this.elements.imagePreview.querySelectorAll(\"div img\");\n    const blob = await this.imageService.createZipFromBase64(images);\n    const link = document.createElement(\"a\");\n    link.href = URL.createObjectURL(blob);\n    link.download = \"image_to_base64.zip\";\n    link.click();\n  }\n\n  async downloadAllImages() {\n    const images = this.elements.convertedImagePreview.querySelectorAll(\"div img\");\n    const blob = await this.imageService.createZipFromImages(images);\n    const link = document.createElement(\"a\");\n    link.href = URL.createObjectURL(blob);\n    link.download = \"base64_to_image.zip\";\n    link.click();\n  }\n}\n","import { ImageUI } from \"./image.ui.js\";\n\nexport async function initImageConverter(container) {\n  return new ImageUI(container);\n}\n"],"names":["imageTemplate","ImageService","blob","resolve","reject","reader","dataUrl","mimeType","base64Data","file","e","base64String","fileName","res","images","zip","i","base64WithPrefix","ImageUI","container","pasteFromClipboard","event","imagePreview","clearInputButton","previewElement","createImagePreview","base64Files","base64Content","base64FileInput","base64Input","convertedImagePreview","clearResultButton","imageInput","downloadAllBase64Button","downloadAllImagesButton","link","initImageConverter"],"mappings":"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"}